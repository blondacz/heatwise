# --- Kafka (Bitnami) ---
kafka:
  replicaCount: 1
  zookeeper:
    enabled: true
  service:
    ports:
      client: 9092
  listeners:
    client:
      protocol: PLAINTEXT
  configurationOverrides:
    "listeners": PLAINTEXT://:9092
    "advertised.listeners": PLAINTEXT://kafka:9092
    "listener.security.protocol.map": PLAINTEXT:PLAINTEXT
    "offsets.topic.replication.factor": "1"
    "transaction.state.log.replication.factor": "1"
    "transaction.state.log.min.isr": "1"
  persistence:
    enabled: true
    size: 5Gi

# --- Heatwise app (subchart) ---
heatwise-immersion:
  image:
    repository: ghcr.io/your-org/heatwise
    tag: latest
    pullPolicy: Always

  env:
    HEATWISE__KAFKA__BOOTSTRAP: "kafka:9092"
    HEATWISE__KAFKA__DEVICEID: "cylinder-1"
    HEATWISE__KAFKA__TOPICS__DECISIONS: "heatwise.decisions"
    HEATWISE__KAFKA__TOPICS__STATE: "heatwise.state"
    HEATWISE__KAFKA__ACKS: "all"
    HEATWISE__AUDIT__FILE__ENABLED: "false"

  persistence:
    enabled: true
    mountPath: /data
    size: 1Gi
